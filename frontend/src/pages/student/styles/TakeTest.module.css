/* ============================================================
   TakeTest.module.css  —  Cyberpunk Theme
   ============================================================ */

/* ---------- Design tokens ---------- */
:root {
  --cp-bg:           #0a0a12;
  --cp-surface:      #10101e;
  --cp-surface2:     #16162a;
  --cp-border:       #2a2a4a;
  --cp-cyan:         #00f5ff;
  --cp-magenta:      #ff00aa;
  --cp-yellow:       #f5e642;
  --cp-green:        #39ff14;
  --cp-red:          #ff2b55;
  --cp-text:         #e0e0ff;
  --cp-muted:        #7070a0;
  --cp-glow-cyan:    0 0 8px #00f5ff88, 0 0 24px #00f5ff33;
  --cp-glow-magenta: 0 0 8px #ff00aa88, 0 0 24px #ff00aa33;
  --cp-glow-green:   0 0 8px #39ff1488, 0 0 20px #39ff1433;
  --cp-glow-red:     0 0 8px #ff2b5588, 0 0 20px #ff2b5533;
  --cp-glow-yellow:  0 0 8px #f5e64288, 0 0 20px #f5e64233;
  --cp-radius:       4px;
  --cp-font:         'Share Tech Mono', 'Courier New', monospace;
}

/* ---------- Base ---------- */
.container {
  min-height: 100vh;
  background: var(--cp-bg);
  background-image:
    linear-gradient(rgba(0, 245, 255, .03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0, 245, 255, .03) 1px, transparent 1px);
  background-size: 40px 40px;
  font-family: var(--cp-font);
  color: var(--cp-text);
  display: flex;
  flex-direction: column;
}

/* ============================================================
   TOP BAR
   ============================================================ */
.topBar {
  position: sticky;
  top: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  padding: .85rem 1.75rem;
  background: var(--cp-surface);
  border-bottom: 1px solid var(--cp-border);
  transition: border-color .3s, box-shadow .3s;
}
.topBar::after {
  content: '';
  position: absolute;
  bottom: -1px; left: 0;
  width: 260px; height: 1px;
  background: var(--cp-cyan);
  box-shadow: var(--cp-glow-cyan);
  transition: background .3s;
}

/* Urgent state — bar pulses red */
.topBarUrgent {
  border-bottom-color: var(--cp-red);
  box-shadow: 0 2px 20px rgba(255, 43, 85, .18);
  animation: urgentPulse 1.5s ease-in-out infinite;
}
.topBarUrgent::after {
  background: var(--cp-red);
  box-shadow: var(--cp-glow-red);
  width: 100%;
}
@keyframes urgentPulse {
  0%, 100% { box-shadow: 0 2px 20px rgba(255, 43, 85, .18); }
  50%       { box-shadow: 0 2px 32px rgba(255, 43, 85, .38); }
}

.testInfo {
  display: flex;
  flex-direction: column;
  gap: .15rem;
  min-width: 0;
}

.testName {
  font-size: .95rem;
  font-weight: 700;
  letter-spacing: .08em;
  text-transform: uppercase;
  color: var(--cp-cyan);
  text-shadow: var(--cp-glow-cyan);
  margin: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 300px;
}

.progress {
  font-size: .7rem;
  letter-spacing: .1em;
  color: var(--cp-muted);
}

/* ---------- Timer ---------- */
.timer {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-size: 1.4rem;
  font-weight: 700;
  letter-spacing: .1em;
  color: var(--cp-cyan);
  text-shadow: var(--cp-glow-cyan);
  padding: .35rem .9rem;
  border: 1px solid rgba(0, 245, 255, .25);
  border-radius: var(--cp-radius);
  background: rgba(0, 245, 255, .05);
  transition: color .3s, border-color .3s, text-shadow .3s;
}
.timer svg { font-size: 1.1rem; }

.timerUrgent {
  color: var(--cp-red);
  text-shadow: var(--cp-glow-red);
  border-color: rgba(255, 43, 85, .4);
  background: rgba(255, 43, 85, .07);
  animation: timerBlink 1s step-end infinite;
}
@keyframes timerBlink {
  0%, 100% { opacity: 1; }
  50%       { opacity: .55; }
}

/* ---------- Submit top button ---------- */
.submitTopBtn {
  display: flex;
  align-items: center;
  gap: .45rem;
  padding: .55rem 1.2rem;
  background: transparent;
  border: 1px solid var(--cp-magenta);
  border-radius: var(--cp-radius);
  color: var(--cp-magenta);
  font-family: var(--cp-font);
  font-size: .78rem;
  font-weight: 700;
  letter-spacing: .1em;
  text-transform: uppercase;
  cursor: pointer;
  white-space: nowrap;
  transition: background .2s, color .2s, box-shadow .2s;
  clip-path: polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 8px 100%, 0 calc(100% - 8px));
}
.submitTopBtn:hover {
  background: var(--cp-magenta);
  color: var(--cp-bg);
  box-shadow: var(--cp-glow-magenta);
}

/* ============================================================
   WARNING BANNER
   ============================================================ */
.warningBanner {
  display: flex;
  align-items: center;
  gap: .75rem;
  padding: .75rem 1.75rem;
  background: rgba(255, 43, 85, .1);
  border-bottom: 1px solid var(--cp-red);
  color: var(--cp-red);
  font-size: .83rem;
  letter-spacing: .06em;
}
.warningBanner svg {
  flex-shrink: 0;
  font-size: 1rem;
  filter: drop-shadow(0 0 4px var(--cp-red));
}
.warningBanner span { flex: 1; }

.dismissBtn {
  background: transparent;
  border: 1px solid var(--cp-red);
  border-radius: var(--cp-radius);
  color: var(--cp-red);
  font-family: var(--cp-font);
  font-size: .8rem;
  padding: .15rem .5rem;
  cursor: pointer;
  transition: background .2s, color .2s;
}
.dismissBtn:hover {
  background: var(--cp-red);
  color: #fff;
}

/* ============================================================
   LAYOUT
   ============================================================ */
.layout {
  display: grid;
  grid-template-columns: 1fr 280px;
  gap: 1.5rem;
  padding: 1.5rem 1.75rem;
  flex: 1;
  align-items: start;
}

/* ============================================================
   QUESTION PANEL
   ============================================================ */
.questionPanel {
  background: var(--cp-surface);
  border: 1px solid var(--cp-border);
  border-radius: var(--cp-radius);
  padding: 1.75rem;
  display: flex;
  flex-direction: column;
  gap: 1.25rem;
  position: relative;
  overflow: hidden;
  clip-path: polygon(0 0, calc(100% - 16px) 0, 100% 16px, 100% 100%, 16px 100%, 0 calc(100% - 16px));
}
.questionPanel::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--cp-cyan), var(--cp-magenta));
}

/* ---------- Q counter ---------- */
.qCounter {
  font-size: .72rem;
  font-weight: 700;
  letter-spacing: .14em;
  text-transform: uppercase;
  color: var(--cp-cyan);
  background: rgba(0, 245, 255, .08);
  border: 1px solid rgba(0, 245, 255, .2);
  border-radius: 2px;
  padding: .28rem .75rem;
  align-self: flex-start;
}

/* ---------- Question image ---------- */
.qImage {
  width: 100%;
  max-height: 260px;
  object-fit: contain;
  border: 1px solid var(--cp-border);
  border-radius: var(--cp-radius);
  background: var(--cp-surface2);
}

/* ---------- Question text ---------- */
.qText {
  font-size: 1.05rem;
  line-height: 1.7;
  color: var(--cp-text);
  margin: 0;
}

/* ---------- Options ---------- */
.options {
  display: flex;
  flex-direction: column;
  gap: .65rem;
}

.option {
  display: flex;
  align-items: center;
  gap: .85rem;
  padding: .75rem 1rem;
  background: var(--cp-surface2);
  border: 1px solid var(--cp-border);
  border-radius: var(--cp-radius);
  color: var(--cp-muted);
  font-family: var(--cp-font);
  font-size: .9rem;
  text-align: left;
  cursor: pointer;
  transition: border-color .18s, color .18s, background .18s, box-shadow .18s;
  width: 100%;
}
.option:hover {
  border-color: var(--cp-cyan);
  color: var(--cp-text);
  background: rgba(0, 245, 255, .05);
}

.optionSelected {
  border-color: var(--cp-cyan);
  background: rgba(0, 245, 255, .1);
  color: var(--cp-cyan);
  box-shadow: var(--cp-glow-cyan);
}

.optionLetter {
  min-width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: .72rem;
  font-weight: 700;
  letter-spacing: .08em;
  border: 1px solid currentColor;
  border-radius: 2px;
  flex-shrink: 0;
  background: rgba(255, 255, 255, .04);
}

/* ---------- Clear button ---------- */
.clearBtn {
  align-self: flex-start;
  padding: .3rem .85rem;
  background: transparent;
  border: 1px dashed var(--cp-red);
  border-radius: var(--cp-radius);
  color: var(--cp-red);
  font-family: var(--cp-font);
  font-size: .72rem;
  letter-spacing: .1em;
  text-transform: uppercase;
  cursor: pointer;
  transition: background .2s, color .2s;
}
.clearBtn:hover {
  background: rgba(255, 43, 85, .12);
}

/* ---------- Nav row ---------- */
.navRow {
  display: flex;
  justify-content: space-between;
  gap: 1rem;
  padding-top: .75rem;
  border-top: 1px solid var(--cp-border);
  margin-top: auto;
}

.navBtn {
  display: flex;
  align-items: center;
  gap: .4rem;
  padding: .6rem 1.2rem;
  background: transparent;
  border: 1px solid var(--cp-border);
  border-radius: var(--cp-radius);
  color: var(--cp-muted);
  font-family: var(--cp-font);
  font-size: .82rem;
  letter-spacing: .08em;
  text-transform: uppercase;
  cursor: pointer;
  transition: color .2s, border-color .2s, box-shadow .2s;
}
.navBtn:hover:not(:disabled) {
  color: var(--cp-cyan);
  border-color: var(--cp-cyan);
  box-shadow: var(--cp-glow-cyan);
}
.navBtn:disabled {
  opacity: .28;
  cursor: not-allowed;
}

/* ============================================================
   QUESTION PALETTE (sidebar)
   ============================================================ */
.palette {
  background: var(--cp-surface);
  border: 1px solid var(--cp-border);
  border-radius: var(--cp-radius);
  padding: 1.25rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  position: sticky;
  top: 72px;
  clip-path: polygon(0 0, calc(100% - 12px) 0, 100% 12px, 100% 100%, 12px 100%, 0 calc(100% - 12px));
}

.paletteTitle {
  font-size: .75rem;
  font-weight: 700;
  letter-spacing: .14em;
  text-transform: uppercase;
  color: var(--cp-cyan);
  text-shadow: var(--cp-glow-cyan);
  margin: 0;
  padding-bottom: .75rem;
  border-bottom: 1px solid var(--cp-border);
}

/* ---------- Palette grid ---------- */
.paletteGrid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: .4rem;
}

.palBtn {
  aspect-ratio: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--cp-surface2);
  border: 1px solid var(--cp-border);
  border-radius: var(--cp-radius);
  color: var(--cp-muted);
  font-family: var(--cp-font);
  font-size: .75rem;
  font-weight: 700;
  cursor: pointer;
  transition: border-color .15s, color .15s, background .15s, box-shadow .15s;
}
.palBtn:hover {
  border-color: var(--cp-cyan);
  color: var(--cp-cyan);
}

.palBtnAnswered {
  background: rgba(0, 245, 255, .12);
  border-color: var(--cp-cyan);
  color: var(--cp-cyan);
}

.palBtnActive {
  background: var(--cp-cyan);
  border-color: var(--cp-cyan);
  color: var(--cp-bg);
  box-shadow: var(--cp-glow-cyan);
}

/* ---------- Legend ---------- */
.legend {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: .35rem .75rem;
  font-size: .68rem;
  letter-spacing: .07em;
  color: var(--cp-muted);
  padding: .65rem .75rem;
  background: var(--cp-surface2);
  border: 1px solid var(--cp-border);
  border-radius: var(--cp-radius);
  line-height: 1.8;
}

.legendAnswered { color: var(--cp-cyan); }
.legendSkipped  { color: var(--cp-muted); }
.legendActive   { color: var(--cp-bg); text-shadow: 0 0 4px var(--cp-cyan); background: var(--cp-cyan); padding: 0 2px; border-radius: 1px; }

/* ---------- Submit palette button ---------- */
.submitPaletteBtn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: .5rem;
  width: 100%;
  padding: .7rem 1rem;
  background: var(--cp-magenta);
  border: none;
  border-radius: var(--cp-radius);
  color: var(--cp-bg);
  font-family: var(--cp-font);
  font-size: .82rem;
  font-weight: 700;
  letter-spacing: .1em;
  text-transform: uppercase;
  cursor: pointer;
  transition: box-shadow .2s, opacity .2s;
  clip-path: polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 8px 100%, 0 calc(100% - 8px));
}
.submitPaletteBtn:hover:not(:disabled) {
  box-shadow: var(--cp-glow-magenta);
}
.submitPaletteBtn:disabled {
  opacity: .45;
  cursor: not-allowed;
}

/* ============================================================
   CONFIRM MODAL
   ============================================================ */
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, .8);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 200;
  padding: 1rem;
}

.confirmModal {
  background: var(--cp-surface);
  border: 1px solid var(--cp-cyan);
  box-shadow: var(--cp-glow-cyan), inset 0 0 60px rgba(0, 245, 255, .03);
  border-radius: var(--cp-radius);
  padding: 2rem;
  width: 100%;
  max-width: 420px;
  display: flex;
  flex-direction: column;
  gap: 1.25rem;
  clip-path: polygon(0 0, calc(100% - 16px) 0, 100% 16px, 100% 100%, 16px 100%, 0 calc(100% - 16px));
}
.confirmModal h3 {
  font-size: 1.1rem;
  font-weight: 700;
  letter-spacing: .12em;
  text-transform: uppercase;
  color: var(--cp-cyan);
  text-shadow: var(--cp-glow-cyan);
  margin: 0;
}

/* ---------- Summary ---------- */
.summary {
  display: flex;
  gap: .75rem;
}

.summaryItem {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: .3rem;
  padding: .85rem .5rem;
  background: var(--cp-surface2);
  border: 1px solid var(--cp-border);
  border-radius: var(--cp-radius);
}
.summaryItem span {
  font-size: .65rem;
  letter-spacing: .12em;
  text-transform: uppercase;
  color: var(--cp-muted);
}
.summaryItem strong {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--cp-text);
  letter-spacing: .05em;
}

.green { color: var(--cp-green) !important; text-shadow: 0 0 6px rgba(57, 255, 20, .5); }
.red   { color: var(--cp-red)   !important; text-shadow: 0 0 6px rgba(255, 43, 85, .5); }

/* ---------- Confirm warning ---------- */
.confirmWarning {
  font-size: .8rem;
  color: var(--cp-yellow);
  margin: 0;
  padding: .55rem .85rem;
  background: rgba(245, 230, 66, .07);
  border: 1px solid rgba(245, 230, 66, .25);
  border-left: 2px solid var(--cp-yellow);
  border-radius: 0 var(--cp-radius) var(--cp-radius) 0;
  letter-spacing: .04em;
}

/* ---------- Confirm actions ---------- */
.confirmActions {
  display: flex;
  gap: .75rem;
}

.cancelBtn {
  flex: 1;
  padding: .65rem 1rem;
  background: transparent;
  border: 1px solid var(--cp-border);
  border-radius: var(--cp-radius);
  color: var(--cp-muted);
  font-family: var(--cp-font);
  font-size: .82rem;
  letter-spacing: .08em;
  text-transform: uppercase;
  cursor: pointer;
  transition: border-color .2s, color .2s;
}
.cancelBtn:hover {
  border-color: var(--cp-text);
  color: var(--cp-text);
}

.confirmSubmitBtn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: .4rem;
  padding: .65rem 1rem;
  background: var(--cp-magenta);
  border: none;
  border-radius: var(--cp-radius);
  color: var(--cp-bg);
  font-family: var(--cp-font);
  font-size: .82rem;
  font-weight: 700;
  letter-spacing: .1em;
  text-transform: uppercase;
  cursor: pointer;
  transition: box-shadow .2s, opacity .2s;
  clip-path: polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 8px 100%, 0 calc(100% - 8px));
}
.confirmSubmitBtn:hover:not(:disabled) {
  box-shadow: var(--cp-glow-magenta);
}
.confirmSubmitBtn:disabled {
  opacity: .45;
  cursor: not-allowed;
}

/* ============================================================
   RESPONSIVE
   ============================================================ */
@media (max-width: 900px) {
  .layout {
    grid-template-columns: 1fr;
    padding: 1rem;
  }
  .palette {
    position: static;
    clip-path: none;
  }
  .paletteGrid {
    grid-template-columns: repeat(8, 1fr);
  }
}

@media (max-width: 540px) {
  .topBar {
    flex-wrap: wrap;
    padding: .75rem 1rem;
    gap: .6rem;
  }
  .testName  { max-width: 180px; }
  .timer     { font-size: 1.1rem; }
  .layout    { padding: .75rem; }
  .paletteGrid { grid-template-columns: repeat(6, 1fr); }
  .summary   { flex-direction: column; }
}